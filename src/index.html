<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>EcomPrimeng</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <meta name="google-signin-client_id" content="614449184147-9gnmmtskp97qaccqqirdo0jfo1he55na.apps.googleusercontent.com">
  <!-- <div class="g-signin2" data-onsuccess="handleCredentialResponse"></div> -->
  <script>
    function handleCredentialResponse(googleUser) {
      var xhr = new XMLHttpRequest();
      xhr.open('POST', 'https://localhost:8080/login');
      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
      xhr.onload = function() {
        console.log('Signed in as: ' + xhr.responseText);
      };
      xhr.send('idtoken=' + id_token);
    }
  </script>

  <script>
    function decodeJWTToken(token) {
      return JSON.parse(atob(token.split(".")[1]));
    }
    function handleCredentialResponse(response) {
      // to decode the credential response.
      const responsePayload = decodeJWTToken(response.credential);
      localStorage.setItem("loggedInUser", JSON.stringify(responsePayload));
      window.location.href = "http://localhost:4200/pages/product";
    }
    function handleSignout() {
      google.accounts.id.disableAutoSelect();
    }
  </script>
</head>
<body>
  <app-root></app-root>

</body>
</html>
