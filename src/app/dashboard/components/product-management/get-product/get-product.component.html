<div class="conatiner">
  <div class="card">
    <p-table
      #dt2
      [value]="products"
      dataKey="id"
      [rows]="5"
      [showCurrentPageReport]="true"
      [rowsPerPageOptions]="[5, 10, 20]"
      [paginator]="true"
      [globalFilterFields]="[
        'name',
        'product.price',
        'product.category.name',
        'product.selectedStatus.name'
      ]"
      styleClass="table"
    >
      <ng-template pTemplate="caption">
        <div class="flex flex-row justify-content-between align-items-center">
          <div
            class="flex flex-row justify-content-between align-content-center w-21rem"
          >
            <div>
              <span class="button-style">
                <button
                  class="button border-round"
                  [routerLink]="['/creoter/product-management', 'add-product']"
                >
                  <i class="pi pi-plus" style="color: white"></i> {{'dGetProduct.add' | transloco}}
                </button>
              </span>
            </div>
          </div>
          <div class="flex">
            <span class="p-input-icon-left ml-auto">
              <i class="pi pi-search"></i>
              <input
                pInputText
                type="text"
                (input)="
                  dt2.filterGlobal($any($event.target).value, 'contains')
                "
                placeholder="Search keyword"
              />
            </span>
          </div>
        </div>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 10%">{{'dGetProduct.id'Â | transloco}}</th>
          <th style="width: 10%">{{'dGetProduct.name' | transloco}}</th>
          <th style="width: 10%">{{'dGetProduct.img' | transloco}}</th>
          <th style="width: 10%">{{'dGetProduct.price' | transloco}}</th>
          <th style="width: 10%">{{'dGetProduct.quantity' | transloco}}</th>
          <th style="width: 10%">{{'dGetProduct.status' | transloco}}</th>
          <th style="width: 10%">{{'dGetProduct.category' | transloco}}</th>
          <th style="width: 10%">{{'dGetProduct.companyName' | transloco}}</th>
          <th style="width: 10%">{{'dGetProduct.actions' | transloco}}</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-product>
        <tr>
          <td>{{ product.id }}</td>
          <td>{{ product.name }}</td>
          <td>
            <img
              class="w-9 shadow-2 border-round"
              [src]="getFileUrl(product?.file)"
              [alt]="product.name"
            />
          </td>
          <td>{{ product?.priceStacked }}</td>
          <td>{{ product?.quantity }}</td>
          <td>
            <p-tag
              [value]="product?.selectedStatus.name | stockStatus "
              [severity]="getSeverity(product?.selectedStatus.name)"
            ></p-tag>
          </td>
          <td>
            {{
              product?.category.name| categoryStatus
            }}
          </td>
          <td>{{ product?.companyName  }}</td>
          <td>
            <div
              class="flex flex-row justify-content-start align-content-center w-21rem"
            >
              <div>
                <span class="button-style">
                  <button pButton class="button" [routerLink]="['/creoter/product-management','update-product' , product.id]">
                    <i class="pi pi-pencil mr-1" style="color: white"></i> {{'dGetProduct.update' | transloco}}
                  </button>
                </span>
              </div>
              <div>
                <span class="button-style" style="margin-left: 5px">
                  <button pButton class="button" (click)="deleteProduct(product.id)">
                    <i class="pi pi-trash mr-1" style="color: white"></i> {{'dGetProduct.delete' | transloco}}
                  </button>
                </span>
              </div>
            </div>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="5">{{'dGetProduct.notFound' | transloco}}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
